<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=443&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Intl keyboard mapping for Latin characters on Ubuntu 20.04 (updated) | WarGames</title>
<meta name="keywords" content="">
<meta name="description" content="[![Wisdom of the Ancients](https://imgs.xkcd.com/comics/wisdom_of_the_ancients.png)](http://xkcd.com/979/)
(note: this post was updated in May 2020 to reflect it works with Ubuntu 20.04 and Gnome 3.36.1. It has also been tested with Ubuntu 18.04 and Gnome 3.28.1. Original title &ldquo;Using .XCompose with Chrome and Sublime Text&rdquo;)
If you use US International keyboard on Linux (e.g., if you write in Spanish or Brazilian Portuguese), you know the royal pain of having to press space after the compose character (typically &#39;). Contractions like can&rsquo;t, won&rsquo;t, Mary&rsquo;s, etc are a struggle, as you have to press space after &#39;, otherwise you&rsquo;ll get canť, wonť, Maryś, etc.">
<meta name="author" content="Gui Ambros">
<link rel="canonical" href="https://wrgms.com:443/posts/using-xcompose-with-chrome-and-sublime-text/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.82dbd1eb53a66f19cbfb2a9b41984979e0118e8b671c733ce84cbdcd685bc7aa.css" integrity="sha256-gtvR61OmbxnL&#43;yqbQZhJeeARjotnHHM86Ey9zWhbx6o=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://wrgms.com:443/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://wrgms.com:443/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://wrgms.com:443/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://wrgms.com:443/apple-touch-icon.png">
<link rel="mask-icon" href="https://wrgms.com:443/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://wrgms.com:443/posts/using-xcompose-with-chrome-and-sublime-text/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

  

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://wrgms.com:443/" accesskey="h" title="WarGames (Alt + H)">WarGames</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>



<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Intl keyboard mapping for Latin characters on Ubuntu 20.04 (updated)
    </h1>
    <div class="post-meta"><span title='2014-09-21 07:31:11 +0000 UTC' style='color: var(--post-date-color);'>September 21, 2014</span>

</div>
  </header> 
  <div class="post-content"><center>[![Wisdom of the Ancients](https://imgs.xkcd.com/comics/wisdom_of_the_ancients.png)](http://xkcd.com/979/)</center>
<p><em>(note: this post was updated in May 2020 to reflect it works with Ubuntu 20.04 and Gnome 3.36.1. It has also been tested with Ubuntu 18.04 and Gnome 3.28.1. Original title &ldquo;Using .XCompose with Chrome and Sublime Text&rdquo;)</em></p>
<p>If you use US International keyboard on Linux (e.g., if you write in Spanish or Brazilian Portuguese), you know the royal pain of having to press space after the compose character (typically <code>'</code>). Contractions like <em>can&rsquo;t</em>, <em>won&rsquo;t</em>, <em>Mary&rsquo;s</em>, etc are a struggle, as you have to press <code>space</code> after <code>'</code>, otherwise you&rsquo;ll get <em>canť</em>, <em>wonť</em>, <em>Maryś</em>, etc.</p>
<p>It&rsquo;s even more painful if you ever used Windows, as the US Intl Keyboard works fine out of the box. It&rsquo;s a shame that Linux keyboard is still horribly broken by default (some may say it&rsquo;s by design; no, it&rsquo;s not).</p>
<p>It has been <a href="http://ubuntuforums.org/showthread.php?t=1591044">asked</a> <a href="http://art.ubuntuforums.org/showthread.php?p=7762169">before</a>, but most answers will point you to use xim, which will open another can of worms. You&rsquo;ll end up in a rabbit hole of <a href="https://code.google.com/p/chromium/issues/detail?id=351230">Chrome bugs</a> and <a href="http://whitequark.org/blog/2014/04/14/xcompose-support-in-sublime-text/">intrincate workarounds</a> to make Sublime work (spoiler: it won&rsquo;t). Before you realize, the night is gone.</p>
<p>After spending a lot of time troubleshooting, I got to a deceptively simple arrangement, allowing .XCompose customizations in GTK+, QT, Aura (Chromium), and even plain terminal:</p>
<p><strong>Just use <code>uim</code>.</strong></p>
<p>Get rid of the default iBus, xim and everything else, and just go with uim.</p>
<p><del>Of course, YMMV. I&rsquo;m running Ubuntu 14.04 with Gnome 3.12.1, and using Chrome v38.0.2125.66 beta, and Sublime Text 3, build 3064.</del>
<em>(oh the version inflation! Now tested with Ubuntu 20.04, Gnome 3.36, Chrome 81, Sublime Text 3 build 3210)</em></p>
<p>This also has the added benefit of allowing Unicode characters using <code>Ctrl+Shift+U</code>.</p>
<p>Note that Sublime overrides the default keybinding for <code>Ctrl+Shift+U</code> with soft_redo (<a href="http://stackoverflow.com/questions/16618240/how-to-add-parameters-to-a-built-file-in-sublime-text-3-before-execution">source</a> ). You have two options here: 1) edit the default keybinding file - which is not recommended, as it&rsquo;ll be overwritten on your next upgrade, or 2) use <code>Ctrl+Shift+Alt+U</code>. I&rsquo;ve chosen the latter.</p>
<p>Detailed instructions:</p>
<ol>
<li>Install uim with <code>sudo apt install uim</code></li>
</ol>
<ul>
<li>
<p>Check which inputs you have installed with <code>im-config -l</code>. Keep only <em>uim</em> and <em>xim</em> (optional, but recommended); remove the rest with <code>apt remove ibus etc</code></p>
</li>
<li>
<p>Use <code>im-config -n uim</code> to set the default input to uim</p>
</li>
<li>
<p>System Config, Regional Settings, select &ldquo;<em>US, intl with dead keys</em>&rdquo;</p>
</li>
<li>
<p>System Config, Language Support, confirm you have <em>uim</em> under Keyboard input method system. If you removed the other input systems, you should have only uim/none here</p>
</li>
<li>
<p>Add the following lines to /etc/environment:</p>
<pre><code>  GTK_IM_MODULE=uim
  QT_IM_MODULE=uim
  xmodmap -e 'keycode 48 = dead_acute dead_diaeresis dead_acute dead_diaeresis acute diaeresis'
</code></pre>
</li>
<li>
<p>Download <a href="https://gist.github.com/guiambros/b773ee85746e06454596">this</a> <code>.XCompose</code> file and put in your home directory, using <code>curl -L http://bit.ly/XCompose2 &gt; ~/.XCompose</code></p>
</li>
<li>
<p>Log out, log back in and enjoy!</p>
</li>
</ul>
<p>Don&rsquo;t forget to say thanks to <a href="https://twitter.com/tamh">@tamh</a>, who did all the hard work to map the correct keys.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer><div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        
        
        
        
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "wrgms" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://wrgms.com:443/">WarGames</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
